## 2026-01-25 - Sentinel - Unsafe Eval Removal
**Insight:** Security CSP mandates removal of `unsafe-eval`. Legacy code used `new Function` for flexibility. Replacing it with a custom parser requires careful tokenization of both variable names (handling replacements correctly) and operators.
**Protocol:** When replacing `eval/new Function` with a custom parser, ALWAYS test edge cases where variable names might overlap with other tokens or substrings (e.g., `_score` suffixes). Use explicit replacement of known keys rather than relying on global regex replacement of generic patterns which may fail when the variable map logic is disconnected from the expression mutation logic.
